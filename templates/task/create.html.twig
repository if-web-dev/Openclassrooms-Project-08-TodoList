{% extends 'base.html.twig' %}

{% block head_title %}
task create
{% endblock %}

{% block body %}
<main class="container d-flex flex-column">

    <div class="px-4 m-3 text-center border-bottom shadow-bottom">
        <h1 class="display-4 fw-bold">Create a task</h1>
        <div class="col-lg-6 mx-auto">
                <p class="lead mb-4">
                    Here you can create a task!
                </p>
        </div>
        <div class="overflow-hidden" style="max-height: 30vh;">
            <div class="container px-5">
                <img src="{{ asset('img/todo-banner-2.png') }}" class="img-fluid rounded-3 mb-4" alt="Example image"
                    width="700" height="500" loading="lazy">
            </div>
        </div>
    </div>

    <a href="{{ path('tasks_list') }}" class="btn btn-todo-1 m-3 mx-auto">Back to task list</a>

    <div class="container my-3 task">
        
        {{ form_start(form, {'action' : path('task_create', {'id': 'task'})}) }}

        {{ form_widget(form) }}

        <button type="submit" class="btn btn-success mt-3">Create</button>

        {{ form_end(form) }}
       
    </div>

</main>

{% endblock %}

{% block javascript %}



<script>
    $(document).ready(function () {
        // Sélectionnez la case à cocher par son nom
        let $checkbox = $('#task_checkbox_field');
    
        $checkbox.change(function () {
            let isChecked = $(this).prop("checked");
            let $form = $(this).closest('form');
            let data = {};
            data[$(this).attr('name')] = $(this).val();
    
            if (isChecked) {
                $.post($form.attr('action'), data).then(function (data) {
                    // Supprimez d'abord l'élément s'il existe
                    $("#conditional-field").detach();
                    let input = $(data).find("#conditional-field");
                    if (input.length) {
                        $('#task').append(input);
                    }
                });
            } else {
                // Supprimez l'élément #conditional-field s'il existe
                $("#conditional-field").detach();
            }
        });
    });
    
</script>

{% endblock %}